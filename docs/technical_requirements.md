# 1. Цель проекта

Цель проекта — разработать универсальную систему автоматизации процессов (далее Система).
Система направлена на решение проблем с местонахождением, перемещением и отгрузкой приборов. 
Также в ней должны присутвовать подсистемы статистики и аналитики, изменения цен, таблица 
актуальных заказов. Помимо этого возможно подключение чат-ботов для различных мессенджеров 
для оперативного оповещения или отправки сообщений об изменении в базе данных.


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

старый
1. Регистрация, аутентификация и авторизация
2. Функционал для сотрудников, админов
3. Функционал управления базой данных с приборами
4. Функцонал подключения, настройки и работы чат-ботов в мессенджерах
5. Функционал подсистемы статистики и аналитики
6. Функционал для управления таблицей актуальных заказов

новый
1.	Регистрация, аутентификация и авторизация
2.	Функционал для менеджмента изделий в базе данных
3.	Функционал ведения таблицы актуальных заказов
4.	Функционал для сотрудников, админов
5.	Функционал для подключения различных мессенджеров
6.	Функционал для изменения цены на продукцию на сайтах


Система, на данный момент, предполагает использование для одного конкретного предприятия и 
не подразумевает её внедрение в других местах. Однако подобный функционал - универсальность
и возможность использования где-то ещё будет заложен в Систему. Система будет развернута на 
внутренних серверах компании и не предполагает выхода в сеть Интернет 
(исключая модули чат-ботов для мессенджеров).

Процесс установки Системы должен быть сопровожден созданием учетной записи главного администратора. 
Это может быть реализовано, по крайней мере в первой версии, не в интерфейсе Системы, а при 
помощи команды на сервере. Для этого команде должны быть переданы следующие данные:

* login — обязательное поле
* пароль — обязательное поле

Процесс создания учетной записи главного администратора через команду на сервере должен быть 
описан в документации Системы.

## 2.1. Типы пользователей

Система предусматривает два типа пользователей системы: 
* Сотрудник
* Аминистратор

Сотрудник может управлять приборами исходя из ограничений на доступ к определенным категориям, 
обновлять список актуальных заказов, запрашивать сроки выполнения заказа или же отвечать на запросы, 
знакомится со своей статистикой и общедоступной, редактирование профиля и настройка оповещений. 
Администратору доступны настройки Системы (включая общие и подсистем), внесение изменений в любую 
базу данных, статистика или история действий любого сотрудника, регистрация новых пользовавтелей.

__Важно. Администратор является расширенной версией обычного сотрудника в Системе. 
Это значит что всё, что может сотрудник, может и администратор. Данное замечаение сделано 
в том числе для дальнейшего понимания описания возможностей типов пользователей.__


## 2.2. Регистрация пользователей

Процесс регистрации пользователей должен быть реализован в интерфейсах Системы. 

__Зарегестрировать в системе нового пользователя может только администратор.__

При регистрации пользователя должны быть запрошены
следующие поля:

* login — обязательное поле
* пароль — обязательное поле
* роль — обязательное поле
* имя и фамилия — обязательное поле
* email — опциональное поле

После отправки формы регистрации сотрудник или администратор могут войти в Систему,
указав свой login и пароль. Восстановить доступ к учетной записи при потере этих данных
может только администратор через интерфейс системы.


## 2.3. Аутентификация пользователей

Аутентификация пользователей осуществляется по логину и паролю, указанными при регистрации
в Системе. В первой версии не предусматривается автоматический сброс пароля и требование от 
пользователя его обновить по истечению определенного срока (например - 30 дней).


## 2.4. Функционал для менеджмента изделий в базе данных

Исходя из того, что предприятие занимается двумя основными направлениями деятельности,
то управление изделиями в этих направлениях должно быть разграничено. Соответственно 
должны быть созданы отдельные сущности под изделия каждого направления.

Первая тематика относится к оборудованию по безопасности. База данных этого оборудования
должны быть следующего вида: имеется общее название изделия и с ним связаны конкретные модели,
которые имеют свои уникальные номера.

Вторая тематика - тепловизионное оборудование. Модель схожа с оборудованием по безопасности,
за исключение того, что модели могут иметь также и разное название.

Общий функционал менеджмента изделий следующий:
1. Хранение оборудование в табличном формате
2. Добавление новый изделий и моделей
3. Редактирование уже существующих изделий и моделей
4. История изменений записей в базе данных
5. Изменение статусов изделий
6. Автоматический пересчет количества товаров с определенным статусом


### 2.4.1. Хранение оборудование в табличном формате

Все изделия и их модели должны быть представлены в виде двумерных таблиц с необходимыми полями.
Изделия должны отображать следующие поля:
* Название изделия
* Количество на складе
* Количество на реализации
* Количество приборов, которые не проданы, но и находятся не на складе

Модели должны отображать следущие поля:
* Название модели - если оно отличается от названия изделия
* Номера (уникальные, ФСТЭК, ФСБ) - если имеются у данных изделий
* Статус - текущий статус модели
* Дата последнего изменения


### 2.4.2. Добавление новых изделий и моделей

Изделия имеют общий вид для обоих категорий оборудования. Для каждого нового изделия задаются:
* Название изделия - обязательное поле
* Краткое описание - необезательное поле 

Для моделей оборудования по безопасности:
* Уникальный номер
* Номер марки ФСТЭК
* Номер марки ФСБ
* Текущий статус прибора

Для моделей тепловизионного оборудования:
* Название модели изделия - опциональное поле
* Уникальный номер - опциональное поле для номерных изделий
* Текущий статус прибора - опциональное поле

В Системе должен быть функционал для внесения в базу данных единовременно сразу 
нескольких изделий и моделей с помощью указания нескольких номеров или через 
счетчик.

Добавленные изделия помечаются дополнительным статусом "Новый" для удобства работы с
только что добавленными позициями. В первой версии Системы данный статус будет активным до
обновления страницы.


### 2.4.3. Редактирование уже существующих изделий и моделей

После добавления изделия или его моделей они могут быть отредактированы через интерфейс Системы.
Для редактирования доступны все заполненные поля, а также возможно удаление позиции в базе данных.


### 2.4.4. История изменений записей в базе данных

Для каждой модели в Системе предусмотрена история изменения статусов. В неё происходит запись каждый 
раз, когда у модели меняется статус. Поля в истории следующие:
* Дата изменения
* Новый статус + дополнительная информация если была заполнена
* Автор изменения


### 2.4.5. Изменение статусов изделий

Отдельным элементом редактирования вынесено изменение статуса. Это является важной частью управления
готовыми изделиями. Для каждого изделия по своей тематике предусмотрен некий знак, который должен 
меняться в соответсвии с реальным статусом изделия.

Исходя из двух тематик, которыми занимается предприятие, для каждой из них предусмотрены свои статусы.
Для тематики оборудования по безопасности:
* Сборка на производстве
* Готово к отгрузке
* На складе ___name___ - на каком конкрентно складе находится оборудование.
* На реализации
* Продан по счету
* Продан через сайт
* Другое - поле для комментария

Для тематики тепловизионного оборудования:
* На складе
* На реализации
* Отправлен на починку 
* Продан по счету
* Продан через сайт
* Продан за наличные
* Другое - поле для комментария

Статусы должны отображаться рядом с каждой моделью изделия в базе данных и иметь свой отличительный цвет для
быстрого считывания информации с интерфейса Системы. Справка по цветам должна быть доступна на основных станиицах базы данных
каждой из тематики.

Изменение происходит через интерфейс Системы и включает в себя следующие поля:
* Дата - опциональное поле, по умолчанию текущая дата, однако можно выбрать другую, если необходимо
* Новый статус - в первой версии Системы обычный выбор с невозможностью выбора текущего статуса
* Поле для комментария - в него могут быть записаны дополнительные сведения к статусу 

### 2.4.6. Автоматический пересчет количества товаров с определенным статусом

Пересчет происходит про трем полям (в первой врсии системы) при любом изменении модели данного изделия.
После пересчета обновленные данные перезаписываются в базу данных для дальнейшего отображения.
Под пересчет попадают следующие статусы приборов:
* На складе
* На реализации
* Другое


## 2.5. Функционал ведения таблицы актуальных заказов

Система предусматривает функционал для работы с заказами. Это подразумевает 
под собой отдельный интерфейс для внесения новых заказов, сортировки и изменения
состояния текущих заказов. Выполненные заказы переносятся в базу данных после
заполнения необходимой информации.

Заполнение необходимой информации происходит в интерфейсе Системы после изменения
статуса заказа на "Готов к отгрузке". Поля для заполнения определяются в соответсвии
с изделием в заказе.

Важной частью в данном функционале является указание сроков изготовления для 
конкретной позиции в заказах. Данная информация должна постоянно актуализироваться.

При добавлении необходимо указать одно или несколько изделий, их количество и 
срочность заказа. Сортировка в таблице заказов происходит по строчности. 
Новые позиции добавляются в к своим группам по статусам. Предусмотрены следующие
статусы:
* **Обычный** - заказ выполняется в обычном режиме без спешки
* **Срочный** - требует сокращения времени производства
* **В первую очередь** - выполняется поверх остальных при наличии для этого необходимых
комплектующий и исполнителей
* **Прямо сейчас** - крайний вариант, при которым необходимо отложить все остальные 
заказы и выполнить данный


## 2.6. Функционал для сотрудников, админов

Администратор и сотрудник после аутентификации (ввод логина и пароля) получает доступ к работе в Системе.
Доступны следующие блоки функционала для обоих типов пользователей:
1. Редактирование данных профиля
2. Добавление новых и редактировние изделий в базе данных
3. Изменение статусов изделий
4. Добавление новый заказов на оборудование
5. Изменение цены товаров на сайте компании


Для админов добавляется следующие:
1. Изменение настроек отдельных подсистем и в целом всей Системы
2. Регистрация пользователей
3. Просмотр истории изменений любого сотрудника


## 2.7. Функционал для подключения различных мессенджеров

Система предусматривает возможность интеграции в различные мессенджеры. На первом этапе планируется:
1. Telegram
2. WhatsApp

Итеграция подразумеает под собой отправку сообщений. Это может быть простое уведомление, настроенное пользователем,
либо какие-то системные сообщения, например автоматически формирующиеся при продаже товара (определенного или всех)


## 2.8. Функционал для изменения цены на продукцию на сайтах

В данной реализации Системы изменение цен на сайте предприятия отдельно добавленная
возможность. Так как холдинг имеен несколько сайтов, то изменение доступно на всех.
Оно автоматизировано и нуждается только в новой цене и вызове функции изменения.

Функция изменения цены должна проверять текущую цену с измененой. Это необходимо для
того, чтобы не изменять повторно цену на такую же.

Конфикурация скриптов для изменения цен подходит только под конкретные сайты и
не является универсальной.

# 3. Предлагаемый стек технологий

Для реализации системы предлагается следующий стек технологий:

* Бэкенд:
    - Язык Python
    - Фреймворк Django
    - БД MySQL
    - SQLAlchemy ORM
    - Alembic для миграций
* Фронтенд:
    - Bootstrap
    - Jquery

# 4. Требования к дизайну

Минимализм, лаконичность, акцент на хранимых данных. 